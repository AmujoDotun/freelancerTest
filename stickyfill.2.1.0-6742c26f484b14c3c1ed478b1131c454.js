!function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function n(t){return parseFloat(t)||0}function s(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function r(){function i(){t.pageXOffset!=p.left?(p.top=t.pageYOffset,p.left=t.pageXOffset,g.refreshAll()):t.pageYOffset!=p.top&&(p.top=t.pageYOffset,p.left=t.pageXOffset,u.forEach(function(t){return t._recalcPosition()}))}function o(){s=setInterval(function(){u.forEach(function(t){return t._fastCheck()})},500)}function n(){clearInterval(s)}if(!d){d=!0,i(),t.addEventListener("scroll",i),t.addEventListener("resize",g.refreshAll),t.addEventListener("orientationchange",g.refreshAll);var s=void 0,r=void 0,a=void 0;"hidden"in e?(r="hidden",a="visibilitychange"):"webkitHidden"in e&&(r="webkitHidden",a="webkitvisibilitychange"),a?(e[r]||o(),e.addEventListener(a,function(){e[r]?n():o()})):o()}}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),f=!1,l="undefined"!=typeof t;if(l&&t.getComputedStyle){var h=e.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(t){try{h.style.position=t+"sticky"}catch(e){}return""!=h.style.position})&&(f=!0)}else f=!0;var d=!1,c="undefined"!=typeof ShadowRoot,p={top:null,left:null},u=[],m=function(){function r(t){if(i(this,r),!(t instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(u.some(function(e){return e._node===t}))throw new Error("Stickyfill is already applied to this node");this._node=t,this._stickyMode=null,this._active=!1,u.push(this),this.refresh()}return a(r,[{key:"refresh",value:function(){if(!f&&!this._removed){this._active&&this._deactivate();var i=this._node,r=getComputedStyle(i),a={position:r.position,top:r.top,display:r.display,marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,cssFloat:r.cssFloat};if(!isNaN(parseFloat(a.top))&&"table-cell"!=a.display&&"none"!=a.display){this._active=!0;var l=i.style.position;("sticky"==r.position||"-webkit-sticky"==r.position)&&(i.style.position="static");var h=i.parentNode,d=c&&h instanceof ShadowRoot?h.host:h,p=i.getBoundingClientRect(),u=d.getBoundingClientRect(),m=getComputedStyle(d);this._parent={node:d,styles:{position:d.style.position},offsetHeight:d.offsetHeight},this._offsetToWindow={left:p.left,right:e.documentElement.clientWidth-p.right},this._offsetToParent={top:p.top-u.top-n(m.borderTopWidth),left:p.left-u.left-n(m.borderLeftWidth),right:-p.right+u.right-n(m.borderRightWidth)},this._styles={position:l,top:i.style.top,bottom:i.style.bottom,left:i.style.left,right:i.style.right,width:i.style.width,marginTop:i.style.marginTop,marginLeft:i.style.marginLeft,marginRight:i.style.marginRight};var g=n(a.top);this._limits={start:p.top+t.pageYOffset-g,end:u.top+t.pageYOffset+d.offsetHeight-n(m.borderBottomWidth)-i.offsetHeight-g-n(a.marginBottom)};var v=m.position;"absolute"!=v&&"relative"!=v&&(d.style.position="relative"),this._recalcPosition();var _=this._clone={};_.node=e.createElement("div"),o(_.node.style,{width:p.right-p.left+"px",height:p.bottom-p.top+"px",marginTop:a.marginTop,marginBottom:a.marginBottom,marginLeft:a.marginLeft,marginRight:a.marginRight,cssFloat:a.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),_.node.className="stickyfill-clone";var y=getComputedStyle(i);y.order&&(_.node.style.order=y.order),h.insertBefore(_.node,i),_.docOffsetTop=s(_.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=p.top<=this._limits.start?"start":p.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":o(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":o(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":o(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(s(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,o(this._node.style,this._styles),delete this._styles,u.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||o(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),u.some(function(e,i){return e._node===t._node?(u.splice(i,1),!0):void 0}),this._removed=!0}}]),r}(),g={stickies:u,Sticky:m,forceSticky:function(){f=!1,r(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<u.length;e++)if(u[e]._node===t)return u[e];return new m(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],i=function(i){var o=t[i];return o instanceof HTMLElement?u.some(function(t){return t._node===o?(e.push(t),!0):void 0})?"continue":void e.push(new m(o)):(e.push(void 0),"continue")},o=0;o<t.length;o++){i(o)}return e}},refreshAll:function(){u.forEach(function(t){return t.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}u.some(function(e){return e._node===t?(e.remove(),!0):void 0})},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=function(e){var i=t[e];u.some(function(t){return t._node===i?(t.remove(),!0):void 0})},i=0;i<t.length;i++)e(i)},removeAll:function(){for(;u.length;)u[0].remove()}};f||r(),"undefined"!=typeof module&&module.exports?module.exports=g:l&&(t.Stickyfill=g)}(window,document);